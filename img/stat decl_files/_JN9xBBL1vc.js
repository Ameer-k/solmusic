if (self.CavalryLogger) { CavalryLogger.start_js(["zPUkQFp"]); }

__d("GroupsCometJoinForumButton_action$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"GroupsCometJoinForumButton_action$normalization",selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"GroupJoinFriction",kind:"LinkedField",name:"integrity_join_friction",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"GroupActorsEligibleToJoinConnection",kind:"LinkedField",name:"actors_eligible_to_join",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"max",value:2}],kind:"ScalarField",name:"count_up_to",storageKey:"count_up_to(max:2)"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_intervention_view_model",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}]};e.exports=a}),null);
__d("GroupsCometJoinForumButton_action.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"GroupsCometJoinForumButton_action",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW",path:"group.id"},{args:null,kind:"FragmentSpread",name:"useGroupsCometJoinForumAction_group"}],storageKey:null},action:"THROW",path:"group"}],type:"GroupJoinForumAction",abstractKey:null};e.exports=a}),null);
__d("useGroupsCometJoinForumAction_group.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGroupsCometJoinForumAction_group",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"GroupJoinFriction",kind:"LinkedField",name:"integrity_join_friction",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"GroupActorsEligibleToJoinConnection",kind:"LinkedField",name:"actors_eligible_to_join",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"max",value:2}],kind:"ScalarField",name:"count_up_to",storageKey:"count_up_to(max:2)"}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"action_intervention_view_model",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Group",abstractKey:null};e.exports=a}),null);
__d("useGroupsCometJoinForumAction",["fbt","Actor","CometRelay","GroupsCometIntegrityInformUtils","GroupsCometIntegrityJoinFrictionDialog.entrypoint","GroupsCometPageSelfJoinDialog.entrypoint","InterventionDialog.entrypoint","JSResourceForInteraction","cometPushToast","emptyFunction","react","requireDeferred","useCometEntryPointDialog","useCometLazyDialog","useGroupActorJoinRequestMutation","useGroupsCometJoinForumAction_group.graphql","useNullthrowsViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;e=d("react");var j=e.useCallback,k=e.useState,l=c("JSResourceForInteraction")("GroupsCometFeatureLimitErrorDialog.react").__setRef("useGroupsCometJoinForumAction"),m=c("requireDeferred")("GroupCometJoinForumMutation").__setRef("useGroupsCometJoinForumAction"),n=c("requireDeferred")("SilenceableErrorMessageUtils").__setRef("useGroupsCometJoinForumAction");function a(a,e,f,g,o){f===void 0&&(f=c("emptyFunction"));g===void 0&&(g=c("emptyFunction"));o===void 0&&(o=null);var p=d("CometRelay").useFragment(i!==void 0?i:i=b("useGroupsCometJoinForumAction_group.graphql"),a),q=c("useNullthrowsViolation")(p==null?void 0:p.id),r=c("useNullthrowsViolation")(p==null?void 0:p.name);a=p==null?void 0:(a=p.actors_eligible_to_join)==null?void 0:a.count_up_to;var s=a!=null&&a>1;a=d("Actor").useActor();a=a[0];var t=d("CometRelay").useRelayEnvironment(),u=k(!1),v=u[0],w=u[1];u=c("useCometLazyDialog")(l);var x=u[0];u=c("useCometEntryPointDialog")(c("GroupsCometIntegrityJoinFrictionDialog.entrypoint"),{actorID:a,groupID:q});var y=u[0];a=c("useCometEntryPointDialog")(c("GroupsCometPageSelfJoinDialog.entrypoint"),{groupID:q});var z=a[0];u=c("useCometEntryPointDialog")(c("InterventionDialog.entrypoint"),{actionType:"JOIN",entityID:q});var A=u[0],B=j(function(){return d("cometPushToast").cometPushSimpleToast(h._("You joined {group_name}.",[h._param("group_name",r)]))},[r]),C=function(){return d("cometPushToast").cometPushErrorToast({message:h._("There was a problem signing up. Please try again later.")})};function D(a){n.onReady(function(b){var c=b.getMetadataFromError;b=b.shouldHideErrorMessage;w(!1);C();f();var d=Array.isArray(a)?a==null?void 0:a[0]:a;if(b(c(d)))return;x({error:a,onClose:function(){}})})}var E=j(function(){return m.onReady(function(a){a(t,q,e,function(){w(!1),B(),g()},function(){w(!1),C(),f()},o)})},[t,q,e,g,f,B,o]),F=c("useGroupActorJoinRequestMutation")(),G=function(){if(s)return z({onCommitJoinMutation:F,onJoinMutationCompleted:function(a){w(!1),B(),g(a)},onSubmitError:D},function(){return w(!1)});else E()};a=function(){var a;w(!0);if(c("GroupsCometIntegrityInformUtils").isInformTypeSupported(p==null?void 0:(a=p.integrity_join_friction)==null?void 0:a.type))return y({onConfirm:function(){G()}});if((p==null?void 0:(a=p.action_intervention_view_model)==null?void 0:a.__typename)!=null)return A({onConfirmLike:G,showEntityProfileCTA:e!=="group_mall"});G()};return[a,v]}g["default"]=a}),98);
__d("GroupsCometJoinForumButton.react",["fbt","ix","CometProgressButtonIndeterminate.react","CometRelay","GroupsCometJoinButtonWithMenu.react","GroupsCometJoinForumButton_action.graphql","TetraButton.react","emptyFunction","fbicon","gkx","qex","react","useGroupsCometJoinForumAction"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=d("react"),l=c("gkx")("62"),m=(e=c("qex")._("69"))!=null?e:"none";function a(a){var e=a.action,f=a.isPrimary;f=f===void 0?!1:f;var g=a.groupShareTrackingParams;g=g===void 0?null:g;var n=a.onPressJoin,o=n===void 0?c("emptyFunction"):n;n=a.onRequestToJoinError;var p=n===void 0?c("emptyFunction"):n;n=a.onRequestToJoinSuccess;var q=n===void 0?c("emptyFunction"):n;n=a.source;var r=a.useShortenedCTA;r=r===void 0?!1:r;a=a.withMenu;a=a===void 0?!1:a;e=d("CometRelay").useFragment(j!==void 0?j:j=b("GroupsCometJoinForumButton_action.graphql"),e);var s=e.group;e=c("useGroupsCometJoinForumAction")(s,n,function(){return p(s.id)},function(a){return q(s.id,a)},g);var t=e[0];g=e[1];e=n==="gysj"||n==="group_subfeed_page";n=e||l&&n==="group_mall"||m!=="none";n={icon:n?d("fbicon")._(i("943398"),16):void 0,label:r?h._("Join"):h._("Join Group"),onPress:function(){o(),t()},reduceEmphasis:e,type:f?"primary":"secondary"};if(g)return k.jsx(c("CometProgressButtonIndeterminate.react"),babelHelpers["extends"]({},n));return a?k.jsx(c("GroupsCometJoinButtonWithMenu.react"),{groupID:s.id,primaryButtonConfig:n}):k.jsx(c("TetraButton.react"),babelHelpers["extends"]({},n))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);